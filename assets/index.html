<!doctype html>
<html lang="en" ng-app="darjeelingApp">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Darjeeling</title>
	<link rel="stylesheet" href="vendor/angular-material/angular-material.min.css">
	<link rel="stylesheet" href="css/app.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body layout="row" ng-controller="FeedsCtrl">
    <div layout="column" flex>
        <md-toolbar layout="row">
        <div class="md-toolbar-tools">
            <md-button ng-click="toggleSidenav('left')" class="md-icon-button">
                <md-icon aria-label="Menu" md-svg-src="/images/menu.svg"></md-icon>
            </md-button>
            <h1 hide-sm>Darjeeling</h1>

            <span flex></span>

            <md-select name="selectedFeeds" ng-model="selectedFeed" aria-label="Feed to display" style="max-width: 50%"
                       ng-change="displayUnreadItems(selectedFeed)">
              <md-option value="-1" selected>All feeds</md-option>
              <md-option ng-repeat-start="folder in folders" ng-value="folder">{{folder.name}}</md-option>
              <md-option ng-repeat="feed in folder.feeds" ng-repeat-end ng-value="feed" class="selectFeed">{{feed.name}}</md-option>
            </md-select>
            <md-button>
                <md-icon ng-click="displayUnreadItems(selectedFeed)">refresh</md-icon>
            </md-button>

            <span flex></span>
        </div>
        </md-toolbar>

        <section layout="row" flex="">
		    <md-sidenav layout="column" class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left">
		        <md-button class="md-primary md-raised">Subscribe</md-button>
		        <md-switch ng-model="prefs.showUnreadOnly" aria-label="Show unread only">Show unread only</md-switch>
		    </md-sidenav>
        
            <md-content layout="column" flex class="md-padding">
                <md-card ng-repeat="item in items" class="item" ng-init="currentFeed = getCurrentFeed(item)">
                    <div layout="row" layout-sm="column" layout-align-sm="start start">
                        <h2 class="md-headline"><a href="{{item.url}}">{{item.title}}</a></h2>
                        <span flex></span>
                        <span style="color: #999;">
                            <md-tooltip>{{item.publicationDate | date : 'medium'}}</md-tooltip>
                            {{item.publicationDate | prettyDate}}
                        </span>
                    </div>
                    <span class="md-subhead" style="color: #999; margin-bottom: 10px">from {{currentFeed.name}}</span>
                    <div ng-bind-html="item.description | removeSpam | trust" style="overflow-x: auto"></div>
                </md-card>
            </md-content>
        </section>
    </div>

    <script type="text/ng-template" id="subscribePopup.html">
        <div class="modal-header">
            <h3 class="modal-title">Subscribe to new feed</h3>
        </div>
        <div class="modal-body">
            <form>
                <div class="form-group">
                    <label for="url">Feed URL</label>
                    <input type="text" class="form-control" ng-model="url" placeholder="Enter URL here">
                </div>
                <div class="form-group">
                    <label for="name">Feed name</label>
                    <input type="text" class="form-control" ng-model="name" placeholder="Enter name here">
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>
    </script>

    <script src="vendor/angular/angular.min.js"></script>
    <script src="vendor/angular-animate/angular-animate.min.js"></script>
    <script src="vendor/angular-aria/angular-aria.min.js"></script>
    <script src="vendor/angular-material/angular-material.min.js"></script>
    <script src="js/controllers.js"></script>
</body>
</html>